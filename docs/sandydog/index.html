<html lang="en">
<head>
<title>QP Information</title>
<script src="../util.js"></script>
<script src="../schedule.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.29.1/moment.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/moment-timezone/0.5.32/moment-timezone-with-data-10-year-range.min.js"></script>
<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-8HF2HRS1RS"></script>
<script>
	window.dataLayer = window.dataLayer || [];
	function gtag(){dataLayer.push(arguments);}
	gtag('js', new Date());

	gtag('config', 'G-8HF2HRS1RS');
</script>
</head>
<body>
<div="everything">
<p id="text">Remaining in this season (ending July 5th) there are <span id="showcases"></span>, 
<span id="supers"></span>, <span id="rcqs"></span>, and <span id="lcqs"></span>.<br><br>
You need <span id="qps1" style="color:red"></span> QPs to play all remaining QP-gated events and
<span id="qps2" style="color:red"></span> QPs to play all remaining events without using any unnecessary PPs / tix.</p>
</div>
</body>
</html>
<script>
let today = new Date();
let instant = today.getTime(); // unix timestamp
let rcqs = 0;
let supers = 0;
let showcases = 0;
let lcqs = 4; // anticipated unlisted Pauper LCQs

let rcqSched = getRCQs();
let showcaseSched = getShowcasesAndLCQs();
today.setDate(today.getDate() - 1);
for (let i = 0; i < 200 && today.toDateString() !== "Thu Jul 06 2023"; i++) {
	for (let k = 0; k < 2; k++) {
		let sched = [rcqSched, showcaseSched][k];
		if (sched.get(today.toDateString()) != null) {
			for (let j = 0; j < 24; j++) {
				let event = sched.get(today.toDateString())[j];
				if (event != null) {
					let monthPadding = today.getMonth() < 9 ? "0" : "";
					let datePadding = today.getDate() < 10 ? "0" : "";
					let time = `${today.getFullYear()}-${monthPadding}${today.getMonth() + 1}-${datePadding}${today.getDate()}`;
					time += (j < 10 ? " 0" : " ") + j + ":00";
					let timestamp = moment.tz(time, "America/Los_Angeles").unix() * 1000;
					if (instant <= timestamp) {
						if (event.includes("Super")) {
							supers++;
						} else if (event.includes("Qualifier") || event.includes("RCQ")) {
							rcqs++;
						} else if (event.includes("LCQ")) {
							lcqs++;
						} else if (event.includes("Showcase Challenge")) {
							showcases++;
						}
					}
				}
			}
		}
	}
	today.setDate(today.getDate() + 1);
}
	
document.getElementById("showcases").innerHTML = showcases + " Showcase Challenge" + (showcases == 1 ? "" : "s");
document.getElementById("supers").innerHTML = supers  + " Super RCQ" + (supers == 1 ? "" : "s");
document.getElementById("rcqs").innerHTML = rcqs  + " RCQ" + (rcqs == 1 ? "" : "s");;
document.getElementById("lcqs").innerHTML = lcqs  + " MOCS LCQ" + (lcqs == 1 ? "" : "s");;
document.getElementById("qps1").innerHTML = 40 * (showcases + rcqs + lcqs);
document.getElementById("qps2").innerHTML = 40 * (showcases + rcqs + lcqs + supers);

if (localStorage.getItem("colorScheme") === "dark") {
	document.getElementById("text").style.color = "yellow";
	document.getElementById("qps1").style.color = "magenta";
	document.getElementById("qps2").style.color = "magenta";
	document.body.style.backgroundColor = "#121212";
}
</script>